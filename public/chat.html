<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KiwiAI</title>
    <link rel="icon" type="image/x-icon" href="../assets/general/favicon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link type="text/css" rel="stylesheet" href="/page_css/global.css" />
    <link type="text/css" rel="stylesheet" href="/page_css/chat.css" />
</head>

<body>

    <div id="root">
        <h2 id="title" onclick="window.location.href = '/'"><span id="kiwi">kiwi</span> ai</h2>

        <div class="banner">
            <img src='/assets/general/noresponse.png' class=" avatar">
            <h4>Lol</h4>

            <div class="hamburger-menu" id="hamburger-menu">
                <div class="hamburger-icon">
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                </div>
                <div class="dropdown-menu" id="dropdown-menu">
                    <div class="dropdown-item">
                        <button class="dropdown-button" onclick="createNewChat()">New Chat</button>
                        <button class="dropdown-button secondary" onclick="branchCurrentChat()">Branch Chat</button>
                        <button class="dropdown-button secondary" onclick="clearCurrentChat()">Clear Current Chat</button>
                    </div>

                    <div class="section-divider"></div>

                    <div class="dropdown-item">
                        <label class="dropdown-label">Chat History</label>
                        <div class="chat-list" id="chat-list">
                            <!-- Chat history will be populated here -->
                        </div>
                    </div>

                    <div class="section-divider"></div>

                    <div class="dropdown-item">
                        <button class="dropdown-button secondary" onclick="deleteCurrentChat()">Delete Current Chat</button>
                        <button class="dropdown-button secondary" onclick="exportChat()">Export Chat</button>
                    </div>

                    <div class="section-divider"></div>

                    <div class="dropdown-item">
                        <label class="dropdown-label">API Configuration</label>
                    </div>
                    <div class="dropdown-item">
                        <label class="dropdown-label">AI Provider</label>
                        <input type="text" class="dropdown-input" id="ai-provider" placeholder="https://text.pollinations.ai/openai">
                    </div>
                    <div class="dropdown-item">
                        <label class="dropdown-label">Model</label>
                        <input type="text" class="dropdown-input" id="ai-model" placeholder="mistral">
                    </div>
                    <div class="dropdown-item">
                        <label class="dropdown-label">Max Tokens</label>
                        <input type="number" class="dropdown-input" id="max-tokens" placeholder="1000" min="100" max="4000">
                    </div>
                    <div class="dropdown-item">
                        <label class="dropdown-label">API Key</label>
                        <input type="password" class="dropdown-input" id="api-key" placeholder="Your API key (optional)">
                    </div>
                    <div class="dropdown-item">
                        <button class="dropdown-button" onclick="saveApiConfig()">Save API Configuration</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="center-wrapper">
            <div id="message-container">
                <div id="messages">
                  
                </div>
                  <div id="chat-controls">
                    <input id="chat-input" placeholder="Type your message..." autocomplete="off">
                    <div id="extension">
                        <span class="material-symbols-outlined" id="extension-icon">send</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast notification container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Dialog overlay -->
    <div class="dialog-overlay" id="dialog-overlay">
        <div class="dialog" id="dialog">
            <div class="dialog-title" id="dialog-title"></div>
            <div class="dialog-message" id="dialog-message"></div>
            <input class="dialog-input" id="dialog-input" style="display: none;">
            <div class="dialog-buttons" id="dialog-buttons"></div>
        </div>
    </div>

    <script src="/assets/js/api.js"></script>
    <script src="/assets/js/lorebook.js" type="module"></script>
    <script src="/page_script/chat.js"></script>

</body>

</html>